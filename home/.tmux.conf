# Change the default tmux prefix
unbind C-b
set -g prefix C-a

# Use C-a a to send the prefix through to applications running inside tmux
bind a send-prefix

# Reload the tmux configuration when pressing r
bind r source-file ~/.tmux.conf \; display 'Reloaded configuration'

# Smart pane switching with awareness of vim splits
bind -n C-h run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-h) || tmux select-pane -L"
bind -n C-j run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-j) || tmux select-pane -D"
bind -n C-k run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-k) || tmux select-pane -U"
bind -n C-l run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-l) || tmux select-pane -R"
bind -n C-\ run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys 'C-\\') || tmux select-pane -l"

# Map C-l to clear the screen when used after the tmux prefix key
bind C-l send-keys 'C-l'

# Set up the status bar
if-shell "test -f ~/.theme.tmux" "source ~/.theme.tmux"

# Enable italics and true colors by selecting the appropriate terminfo and
# forcing tmux to assume the outer terminal supports true color
#
# The `tmux-256color` terminfo profile needs to be available. If it is not,
# e.g. on macOS X, it can be created using these instructions:
# https://gist.github.com/bbqtd/a4ac060d6f6b9ea6fe3aabe735aa9d95
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:Tc"
